(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ordercart"],{a434:function(t,e,r){"use strict";var n=r("23e7"),a=r("da84"),c=r("23cb"),i=r("5926"),o=r("07fa"),s=r("7b0b"),u=r("65f0"),l=r("8418"),f=r("1dde"),d=f("splice"),p=a.TypeError,h=Math.max,m=Math.min,b=9007199254740991,k="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var r,n,a,f,d,g,v=s(this),w=o(v),x=c(t,w),y=arguments.length;if(0===y?r=n=0:1===y?(r=0,n=w-x):(r=y-2,n=m(h(i(e),0),w-x)),w+r-n>b)throw p(k);for(a=u(v,n),f=0;f<n;f++)d=x+f,d in v&&l(a,f,v[d]);if(a.length=n,r<n){for(f=x;f<w-n;f++)d=f+n,g=f+r,d in v?v[g]=v[d]:delete v[g];for(f=w;f>w-n+r;f--)delete v[f-1]}else if(r>n)for(f=w-n;f>x;f--)d=f+n-1,g=f+r-1,d in v?v[g]=v[d]:delete v[g];for(f=0;f<r;f++)v[f+x]=arguments[f+2];return v.length=w-n+r,a}})},bf69:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container",staticStyle:{"margin-top":"100px"}},[r("b-table",{attrs:{striped:"",hover:"",items:t.products,fields:t.fields,"tbody-tr-class":t.rowClass},scopedSlots:t._u([{key:"cell(image)",fn:function(e){return[e.item.product.image?r("img",{staticStyle:{height:"80px"},attrs:{src:e.item.product.image}}):t._e()]}},{key:"cell(name)",fn:function(e){return[t._v(" "+t._s(e.item.product.name)+" ")]}},{key:"cell(price)",fn:function(e){return[t._v(" "+t._s(e.item.product.price)+" ")]}},{key:"cell(action)",fn:function(e){return[r("b-form-spinbutton",{attrs:{min:"1",inline:""},on:{input:function(r){return t.editcart(e.index,e.item.quantity)}},model:{value:e.item.quantity,callback:function(r){t.$set(e.item,"quantity",r)},expression:"data.item.quantity"}}),r("font-awesome-icon",{staticClass:"ml-3",staticStyle:{color:"#1A4605"},attrs:{icon:["fas","trash"]},on:{click:function(r){return t.editcart(e.index,0)}}})]}}])}),r("h2",{staticClass:"text-right"},[t._v("總金額： "+t._s(t.total)+" 元")]),r("button",{staticClass:"btn-green border-0 rounded-pill",staticStyle:{height:"50px",width:"100px"},attrs:{variant:"success"},on:{click:t.checkout}},[t._v(" 結帳 ")])],1)},a=[],c=r("1da1"),i=(r("96cf"),r("a434"),r("d3b7"),{data:function(){return{products:[],fields:[{key:"image",label:"圖片",thStyle:{background:"#8CA93E",color:"#ffffff"}},{key:"name",label:"名稱",thStyle:{background:"#8CA93E",color:"#ffffff"}},{key:"price",label:"價格",thStyle:{background:"#8CA93E",color:"#ffffff"}},{key:"action",label:"操作",thStyle:{background:"#8CA93E",color:"#ffffff"}}]}},methods:{editcart:function(t,e){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.api.patch("/users/me/cart",{product:r.products[t].product._id,quantity:e},{headers:{authorization:"Bearer "+r.user.token}});case 3:0===e&&(r.products.splice(t,1),r.$store.commit("user/editcart",r.user.cart-1)),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),r.$swal({icon:"error",title:"失敗",text:"修改購物車失敗"});case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},checkout:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.post("/orders",{},{headers:{authorization:"Bearer "+t.user.token}});case 3:t.$router.push("/orders"),t.$store.commit("user/editcart",0),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$swal({icon:"error",title:"失敗",text:"結帳失敗"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},rowClass:function(t,e){if(t&&"row"===e)return t.product.sell?"":"text-danger"}},computed:{total:function(){return this.products.reduce((function(t,e){return t+e.quantity*e.product.price}),0)}},created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/users/me/cart",{headers:{authorization:"Bearer "+t.user.token}});case 3:r=e.sent,n=r.data,t.products=n.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"失敗",text:"取得購物車失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}),o=i,s=r("2877"),u=Object(s["a"])(o,n,a,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=ordercart.f4f97900.js.map